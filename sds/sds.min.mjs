import o from"express";import{createServer as n}from"http";var s;(s=await(import("dotenv-expand")),s||s).expand((o=>o||o)(await(import("dotenv"))).config());const t=process.env,r=o(),e=n(r);import{WebSocketServer as c}from"ws";import i from"node-pty";new c({server:e,path:"/connect-terminal"}).on("connection",(function(o,n,s){const t=i.spawn("bash",[],{name:"xterm-color",cols:80,rows:30});t.onData((function(n){o.send(n)})),t.onExit((function(){o.close()})),o.on("error",console.error),o.on("message",(function(o){let n;(n=o.toString().match(/^%(?<arg>r)\s*(?<rows>\d+)\s*,\s*(?<cols>\d+)$/))?t.resize(+n.groups.rows,+n.groups.cols):t.write(o)}))})),r.use(o.static("src/public")),r.use("/scripts",o.static("node_modules/")),e.listen(t.PORT,(()=>console.log(`Running on localhost:${t.PORT}`)));